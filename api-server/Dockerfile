# Використовуємо легку версію Node.js
FROM node:22-alpine

# Створюємо робочу директорію в контейнері
WORKDIR /app

# Копіюємо файли конфігурації залежностей
COPY package*.json ./

# Встановлюємо всі бібліотеки (express, pg, multer тощо)
RUN npm install

# Копіюємо весь наш код (включно з server.js)
COPY . .

# Створюємо папку для збереження файлів, щоб уникнути помилок доступу
RUN mkdir -p storage

# Відкриваємо порт 3000
EXPOSE 3000

# Запускаємо сервер
CMD ["node", "server.js"]